<div class="modal-header">
  <h4 class="modal-title">Cadastrar Paciente</h4>
</div>
<div class="modal-body">
  <form [formGroup]="formularioPaciente">
    <div class="text-center">
      <h5>Paciente</h5>
    </div>
    <div class="form-row">
      <div class="form-group col-md-7">
        <label for="nomeCompleto">Nome Completo</label>
        <input type="text" class="form-control" id="nomeCompleto" placeholder="Nome Completo"
               formControlName="nomeCompleto">
      </div>
      <div class="form-group col-md-5">
        <label for="dataNascimento">Data de Nascimento</label>
        <input type="date" class="form-control" id="dataNascimento" placeholder="Data de Nascimento"
               formControlName="dataNascimento">
      </div>
    </div>
    <button class="btn btn-primary" (click)="adicionarResponsavel()">Adicionar Responsável</button>
    <form formArrayName="responsaveis">
      <div *ngFor="let responsavel of formularioPaciente.get('responsaveis')['controls']; let i = index">
        <div [formGroupName]="i">
          <div class="row mt-3">
            <div class="col">
              <h5>Responsável {{i + 1}}</h5>
            </div>
            <div class="col text-right">
              <button class="btn btn-outline-danger" [disabled]="i < 1" (click)="removerResponsavel(i)">Remover</button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-7">
              <label for="nomeCompletoResponsavel">Nome Completo</label>
              <input type="text" class="form-control" id="nomeCompletoResponsavel" name="nomeCompletoResponsavel"
                     placeholder="Nome Completo"
                     formControlName="nomeCompleto">
            </div>
            <div class="form-group col-md-5">
              <label for="dataNascimentoResponsavel">Data de Nascimento</label>
              <input type="date" class="form-control" id="dataNascimentoResponsavel" formControlName="dataNascimento">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-7">
              <label for="Telefone">Telefone</label>
              <input type="text" class="form-control" id="Telefone" placeholder="00 0 0000-0000" formControlName="telefone">
            </div>
            <div class="form-group col-md-5">
              <label for="parentesco">Parentesco</label>
              <select class="form-control" id="parentesco" formControlName="parentesco" [value]="" required>
                  <option value="">Selecione</option>
]                 <option *ngFor="let opcao of parentesco" [value]="opcao"> {{opcao}} </option>
              </select>
            </div>
          </div>
          <div class="form-row">

            <div class="form-group col-md-7" formGroupName="login">
              <label for="email">Email</label>
              <input type="email" class="form-control" id="email" placeholder="responsavel@gmail.com"
                     formControlName="email">
            </div>
            <div class="form-group col-md-5">
              <label for="cpf">CPF</label>
              <input type="text" class="form-control" id="cpf" placeholder="000.000.000-00" formControlName="cpf">
            </div>
          </div>

          <form formGroupName="endereco">
            <div class="form-row">
              <div class="form-group col-md-5">
                <label for="rua">Rua</label>
                <input type="text" class="form-control" id="rua" placeholder="Rua Marechal Deodoro"
                       formControlName="rua">
              </div>
              <div class="form-group col-md-5">
                <label for="bairro">Bairro</label>
                <input type="text" class="form-control" id="bairro" name="bairro"
                       required formControlName="bairro">
              </div>
              <div class="form-group col-md-2">
                <label for="numero">Número</label>
                <input type="number" class="form-control" id="numero" name="numero"
                       required formControlName="numero">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-5">
                <label for="cidade">Cidade</label>
                <input type="text" class="form-control" id="cidade" name="cidade"
                       required formControlName="cidade">
              </div>
              <div class="form-group col-md-4">
                <label for="estado">Estado</label>
                <select id="estado" class="form-control" name="estado" required formControlName="estado" [value]="">
                  <option value="">Selecione o estado</option>
                  <option *ngFor="let estado of estados" [ngValue]="estado" selected>{{estado}}</option>
                </select>
              </div>
              <div class="form-group col-md-3">
                <label for="cep">CEP</label>
                <input type="number" class="form-control" id="cep" name="cep" formControlName="cep"
                       required>
              </div>
            </div>
            <div class="form-group">
              <label for="complemento">Complemento</label>
              <textarea class="form-control" id="complemento" name="complemento" formControlName="complemento"></textarea>
            </div>
          </form>

        </div>
      </div>
    </form>

  </form>
</div>
<div class="modal-footer">
  <button class="btn btn-danger" (click)="cancelar()">
    <fa-icon class="mr-2" icon="times"></fa-icon>
    <span>Cancelar</span>
  </button>
  <button class="btn btn-primary" [disabled]="!formularioPaciente.valid" (click)="cadastrar()">
    <fa-icon class="mr-2" icon="save"></fa-icon>
    <span>Cadastrar</span>
  </button>
</div>
